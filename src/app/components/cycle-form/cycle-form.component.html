<div class="form-container">
  <div class="form-header">
    <button class="back-btn" (click)="cancel()">
      <span class="back-icon">‚Üê</span>
    </button>
    <h1>Add Cycle Entry</h1>
  </div>

  <div class="form-content">
    <!-- Loading Indicator -->
    <div *ngIf="isLoading" class="loading-container">
      <mat-spinner diameter="40"></mat-spinner>
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="error-message">
      {{errorMessage}}
    </div>

    <form [formGroup]="cycleForm" (ngSubmit)="saveCycleEntry()">
      <div class="date-section">
        <h2>Period Dates</h2>
        
        <div class="date-fields">
          <mat-form-field appearance="outline" class="date-field">
            <mat-label>Start Date</mat-label>
            <input matInput [matDatepicker]="startPicker" formControlName="startDate" 
                  [min]="minDate" [max]="maxDate" placeholder="MM/DD/YYYY">
            <mat-hint>When your period started</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="startPicker"></mat-datepicker-toggle>
            <mat-datepicker #startPicker></mat-datepicker>
            <mat-error *ngIf="cycleForm.get('startDate')?.hasError('required')">
              Start date is required
            </mat-error>
          </mat-form-field>
          
          <mat-form-field appearance="outline" class="date-field">
            <mat-label>End Date</mat-label>
            <input matInput [matDatepicker]="endPicker" formControlName="endDate" 
                  [min]="cycleForm.get('startDate')?.value || minDate" 
                  [max]="maxDate" placeholder="MM/DD/YYYY">
            <mat-hint>When your period ended</mat-hint>
            <mat-datepicker-toggle matIconSuffix [for]="endPicker"></mat-datepicker-toggle>
            <mat-datepicker #endPicker></mat-datepicker>
            <mat-error *ngIf="cycleForm.get('endDate')?.hasError('required')">
              End date is required
            </mat-error>
          </mat-form-field>
          
          <div *ngIf="cycleForm.hasError('dateRange')" class="date-range-error">
            End date must be after start date
          </div>
        </div>
      </div>

      <div class="symptoms-section">
        <h2>Symptoms</h2>
        
        <div class="symptoms-grid">
          <div *ngFor="let symptom of symptoms" 
               class="symptom-item" 
               [ngClass]="{'selected': symptom.selected}"
               (click)="toggleSymptom(symptom)">
            <span class="symptom-icon">{{symptom.icon}}</span>
            <span class="symptom-name">{{symptom.name}}</span>
          </div>
        </div>
      </div>

      <div class="notes-section">
        <h2>Notes</h2>
        <mat-form-field appearance="outline" class="notes-field">
          <mat-label>Additional Notes</mat-label>
          <textarea matInput formControlName="notes" 
                   placeholder="Add any additional notes about your cycle..."
                   rows="4"></textarea>
        </mat-form-field>
      </div>

      <div class="form-actions">
        <button type="button" class="cancel-btn" (click)="cancel()">Cancel</button>
        <button type="submit" class="save-btn" [disabled]="cycleForm.invalid || isLoading">
          Save
        </button>
      </div>
    </form>
  </div>
</div>